<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³„ë‹¨ ìµœì í™” ì‹œë®¬ë ˆì´ì…˜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        :root { 
            font-family: 'Inter', sans-serif;
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        /* ê¸€ë˜ìŠ¤ëª¨í”¼ì¦˜ íš¨ê³¼ */
        .glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* ê³„ë‹¨ ì‹œê°í™” */
        #stair-visualization {
            width: 100%;
            height: 450px;
            position: relative;
            background: linear-gradient(180deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .stair-step {
            position: absolute;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* ì»¤ìŠ¤í…€ ìŠ¬ë¼ì´ë” */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            background: transparent;
        }
        
        input[type="range"]::-webkit-slider-track {
            background: linear-gradient(90deg, #e0e7ff 0%, #c7d2fe 100%);
            height: 8px;
            border-radius: 4px;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
            transition: all 0.2s;
        }
        
        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.6);
        }

        input[type="range"]::-moz-range-track {
            background: linear-gradient(90deg, #e0e7ff 0%, #c7d2fe 100%);
            height: 8px;
            border-radius: 4px;
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
            border: none;
        }

        /* ê²°ê³¼ ì¹´ë“œ ì• ë‹ˆë©”ì´ì…˜ */
        .metric-card {
            transition: all 0.3s ease;
        }
        
        .metric-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0,0,0,0.15);
        }

        /* ìˆ˜ì‹ ìŠ¤íƒ€ì¼ */
        .formula {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            color: #e2e8f0;
            padding: 16px;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.8;
            overflow-x: auto;
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.3);
        }

        .formula-variable {
            color: #60a5fa;
            font-weight: 600;
        }

        .formula-operator {
            color: #f472b6;
            font-weight: 600;
        }

        .formula-number {
            color: #34d399;
        }

        /* í„ìŠ¤ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes pulse-glow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(102, 126, 234, 0.4);
            }
            50% {
                box-shadow: 0 0 30px rgba(102, 126, 234, 0.8);
            }
        }

        .pulse-glow {
            animation: pulse-glow 2s infinite;
        }

        /* ëª¨ë“œ ë²„íŠ¼ */
        .mode-btn {
            position: relative;
            overflow: hidden;
        }

        .mode-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .mode-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        /* í† ê¸€ ìŠ¤ìœ„ì¹˜ */
        .toggle-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .toggle-content.active {
            max-height: 2000px;
        }

        /* ê·¸ë¦¬ë“œ ë°°ê²½ */
        .grid-bg {
            background-image: 
                linear-gradient(rgba(99, 102, 241, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(99, 102, 241, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§ */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
        }

        /* ë°°ì§€ ìŠ¤íƒ€ì¼ */
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge-good { background: #d1fae5; color: #065f46; }
        .badge-warning { background: #fef3c7; color: #92400e; }
        .badge-danger { background: #fee2e2; color: #991b1b; }

        /* ìˆ«ì ì…ë ¥ ìŠ¤íƒ€ì¼ */
        .value-input {
            width: 80px;
            padding: 6px 10px;
            border: 2px solid #e0e7ff;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 700;
            text-align: center;
            transition: all 0.2s;
        }

        .value-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="max-w-7xl mx-auto">
        
        <!-- í—¤ë” -->
        <div class="glass rounded-2xl shadow-2xl p-8 mb-6 pulse-glow">
            <div class="flex items-center justify-between flex-wrap gap-4">
                <div>
                    <h1 class="text-4xl font-black bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2">
                        <i class="fas fa-chart-line mr-3"></i>ê³„ë‹¨ íš¨ìœ¨ì„± & ì•ˆì „ì„± ë¶„ì„ ì‹œë®¬ë ˆì´í„°
                    </h1>
                    <p class="text-gray-600 text-sm">
                        ë¬¼ë¦¬í•™ ê¸°ë°˜ ê³„ì‚°ìœ¼ë¡œ ìµœì ì˜ ê³„ë‹¨ ì„¤ê³„ë¥¼ ì°¾ì•„ë³´ì„¸ìš”
                    </p>
                </div>
                <div class="flex gap-3">
                    <div class="text-center">
                        <div class="text-3xl font-black text-indigo-600"><span id="efficiency-score">0</span></div>
                        <div class="text-xs text-gray-500 font-semibold">íš¨ìœ¨ ì ìˆ˜</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-black text-green-600"><span id="safety-score">0</span></div>
                        <div class="text-xs text-gray-500 font-semibold">ì•ˆì „ ì ìˆ˜</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ëª¨ë“œ ì„ íƒ -->
        <div class="glass rounded-2xl shadow-xl p-6 mb-6">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-xl font-bold text-gray-800">
                    <i class="fas fa-walking mr-2 text-indigo-600"></i>ì˜¤ë¥´ê¸° ëª¨ë“œ
                </h2>
                <button onclick="toggleFormulas()" class="px-4 py-2 bg-gradient-to-r from-purple-500 to-indigo-500 text-white rounded-lg text-sm font-semibold hover:shadow-lg transition-all">
                    <i class="fas fa-calculator mr-2"></i>ìˆ˜ì‹ ë³´ê¸°
                </button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <button id="mode-1-btn" class="mode-btn py-4 px-6 rounded-xl font-bold text-lg transition-all duration-300 relative z-10" onclick="setMode(1)">
                    <i class="fas fa-shoe-prints mr-2"></i>ëª¨ë“œ A: 1ê³„ë‹¨ì”©
                </button>
                <button id="mode-2-btn" class="mode-btn py-4 px-6 rounded-xl font-bold text-lg transition-all duration-300 relative z-10" onclick="setMode(2)">
                    <i class="fas fa-running mr-2"></i>ëª¨ë“œ B: 2ê³„ë‹¨ì”©
                </button>
            </div>
        </div>

        <!-- ìˆ˜ì‹ ì„¹ì…˜ (í† ê¸€) -->
        <div id="formula-section" class="toggle-content glass rounded-2xl shadow-xl p-6 mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                <i class="fas fa-function mr-2 text-purple-600"></i>ê³„ì‚° ìˆ˜ì‹
            </h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                <!-- ì‹œê°„ ê³„ì‚° -->
                <div class="bg-white rounded-xl p-4 shadow-md">
                    <h3 class="font-bold text-indigo-700 mb-3 flex items-center">
                        <i class="fas fa-clock mr-2"></i>ì†Œìš” ì‹œê°„ (Efficiency)
                    </h3>
                    <div class="formula mb-2">
                        <span class="formula-variable">T</span> <span class="formula-operator">=</span> 
                        <span class="formula-variable">D_total</span> <span class="formula-operator">/</span> 
                        <span class="formula-variable">Vâ‚€</span> <span class="formula-operator">+</span> 
                        <span class="formula-variable">N</span> <span class="formula-operator">Ã—</span> 
                        <span class="formula-number">0.2</span>
                    </div>
                    <div class="text-xs text-gray-600 mt-2">
                        â€¢ D_total: ì´ ìˆ˜í‰ ì´ë™ ê±°ë¦¬ (m)<br>
                        â€¢ Vâ‚€: ì´ˆê¸° ì†ë„ = 1.2 m/s<br>
                        â€¢ N: ì´ ê±¸ìŒ ìˆ˜<br>
                        â€¢ 0.2: ê±¸ìŒë‹¹ ì‹œê°„ íŒ¨ë„í‹° (s)
                    </div>
                </div>

                <!-- ìœ„í—˜ë„ ê³„ì‚° -->
                <div class="bg-white rounded-xl p-4 shadow-md">
                    <h3 class="font-bold text-red-700 mb-3 flex items-center">
                        <i class="fas fa-exclamation-triangle mr-2"></i>ë¯¸ë„ëŸ¬ì§ ìœ„í—˜ë„ (Safety)
                    </h3>
                    <div class="formula mb-2">
                        <span class="formula-variable">Risk</span> <span class="formula-operator">=</span> 
                        <span class="formula-variable">Î¼â‚›</span> <span class="formula-operator">Ã—</span> 
                        <span class="formula-operator">tan(</span><span class="formula-variable">Î¸</span><span class="formula-operator">)</span>
                    </div>
                    <div class="text-xs text-gray-600 mt-2">
                        â€¢ Î¼â‚›: ë§ˆì°° ê³„ìˆ˜ = 0.6<br>
                        â€¢ Î¸: ê³„ë‹¨ ê°ë„ (ë¼ë””ì•ˆ)<br>
                        â€¢ ê°’ì´ ë‚®ì„ìˆ˜ë¡ ì•ˆì „í•¨
                    </div>
                </div>

                <!-- ì—ë„ˆì§€ ê³„ì‚° -->
                <div class="bg-white rounded-xl p-4 shadow-md">
                    <h3 class="font-bold text-green-700 mb-3 flex items-center">
                        <i class="fas fa-bolt mr-2"></i>ìœ„ì¹˜ ì—ë„ˆì§€
                    </h3>
                    <div class="formula mb-2">
                        <span class="formula-variable">Eâ‚</span> <span class="formula-operator">=</span> 
                        <span class="formula-variable">m</span> <span class="formula-operator">Ã—</span> 
                        <span class="formula-variable">g</span> <span class="formula-operator">Ã—</span> 
                        <span class="formula-variable">H</span>
                    </div>
                    <div class="text-xs text-gray-600 mt-2">
                        â€¢ m: ì§ˆëŸ‰ = 72.4 kg<br>
                        â€¢ g: ì¤‘ë ¥ê°€ì†ë„ = 9.81 m/sÂ²<br>
                        â€¢ H: ì´ ë†’ì´ = 5 m
                    </div>
                </div>

                <!-- ìš´ë™ ì—ë„ˆì§€ -->
                <div class="bg-white rounded-xl p-4 shadow-md">
                    <h3 class="font-bold text-blue-700 mb-3 flex items-center">
                        <i class="fas fa-fire mr-2"></i>ìš´ë™ ì—ë„ˆì§€ ê·¼ì‚¬
                    </h3>
                    <div class="formula mb-2">
                        <span class="formula-variable">Eâ‚‚</span> <span class="formula-operator">=</span> 
                        <span class="formula-number">0.5</span> <span class="formula-operator">Ã—</span> 
                        <span class="formula-variable">m</span> <span class="formula-operator">Ã—</span> 
                        <span class="formula-variable">VÂ²â‚áµ¥ğ“°</span> <span class="formula-operator">Ã—</span> 
                        <span class="formula-variable">N</span> <span class="formula-operator">Ã—</span> 
                        <span class="formula-number">0.1</span>
                    </div>
                    <div class="text-xs text-gray-600 mt-2">
                        â€¢ V_avg: í‰ê·  ì†ë„ (m/s)<br>
                        â€¢ N: ì´ ê±¸ìŒ ìˆ˜<br>
                        â€¢ ì´ ì—ë„ˆì§€ = Eâ‚ + Eâ‚‚
                    </div>
                </div>
            </div>
        </div>

        <!-- ë©”ì¸ ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            
            <!-- ì™¼ìª½: ì œì–´íŒ -->
            <div class="lg:col-span-1">
                <div class="glass rounded-2xl shadow-xl p-6 sticky top-4">
                    <h2 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                        <i class="fas fa-sliders-h mr-2 text-indigo-600"></i>ê³„ë‹¨ íŒŒë¼ë¯¸í„°
                    </h2>
                    
                    <div class="space-y-6">
                        <!-- ê°ë„ -->
                        <div class="bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-4">
                            <div class="flex justify-between items-center mb-3">
                                <label class="text-sm font-bold text-gray-700 flex items-center">
                                    <i class="fas fa-angle-double-up mr-2 text-purple-600"></i>ê³„ë‹¨ ê°ë„
                                </label>
                                <input type="number" id="angle-input" min="15" max="45" step="1" value="25" 
                                       class="value-input text-purple-600" onchange="syncAngleInput()">
                            </div>
                            <input type="range" id="angle" min="15" max="45" step="1" value="25" class="w-full">
                            <div class="flex justify-between text-xs text-gray-500 mt-2">
                                <span>15Â°</span>
                                <span>ì™„ë§Œ â† â†’ ê°€íŒŒë¦„</span>
                                <span>45Â°</span>
                            </div>
                        </div>

                        <!-- ë†’ì´ -->
                        <div class="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl p-4">
                            <div class="flex justify-between items-center mb-3">
                                <label class="text-sm font-bold text-gray-700 flex items-center">
                                    <i class="fas fa-arrows-alt-v mr-2 text-blue-600"></i>ê³„ë‹¨ ë†’ì´
                                </label>
                                <input type="number" id="height-input" min="10" max="25" step="1" value="15" 
                                       class="value-input text-blue-600" onchange="syncHeightInput()">
                            </div>
                            <input type="range" id="height" min="10" max="25" step="1" value="15" class="w-full">
                            <div class="flex justify-between text-xs text-gray-500 mt-2">
                                <span>10cm</span>
                                <span>ë‚®ìŒ â† â†’ ë†’ìŒ</span>
                                <span>25cm</span>
                            </div>
                        </div>

                        <!-- ë³´í­ -->
                        <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4">
                            <div class="flex justify-between items-center mb-3">
                                <label class="text-sm font-bold text-gray-700 flex items-center">
                                    <i class="fas fa-arrows-alt-h mr-2 text-green-600"></i>ë³´í­/ë””ë”¤íŒ
                                </label>
                                <input type="number" id="tread-input" min="20" max="40" step="1" value="30" 
                                       class="value-input text-green-600" onchange="syncTreadInput()">
                            </div>
                            <input type="range" id="tread" min="20" max="40" step="1" value="30" class="w-full">
                            <div class="flex justify-between text-xs text-gray-500 mt-2">
                                <span>20cm</span>
                                <span>ì¢ìŒ â† â†’ ë„“ìŒ</span>
                                <span>40cm</span>
                            </div>
                        </div>
                    </div>

                    <!-- ìƒì„¸ ì •ë³´ -->
                    <div class="mt-6 p-4 bg-gradient-to-br from-gray-50 to-slate-50 rounded-xl border border-gray-200">
                        <h3 class="font-bold text-gray-700 mb-3 text-sm flex items-center">
                            <i class="fas fa-info-circle mr-2 text-indigo-600"></i>ê³„ì‚° ìƒì„¸ ì •ë³´
                        </h3>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600">ìˆ˜ì§ ê±°ë¦¬:</span>
                                <span id="v-step-result" class="font-bold text-gray-800">0cm</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">ìˆ˜í‰ ê±°ë¦¬:</span>
                                <span id="h-step-result" class="font-bold text-gray-800">0cm</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">ì´ ê±¸ìŒ ìˆ˜:</span>
                                <span id="steps-result" class="font-bold text-gray-800">0íšŒ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì¤‘ì•™: ì‹œê°í™” -->
            <div class="lg:col-span-1">
                <div class="glass rounded-2xl shadow-xl p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center justify-between">
                        <span>
                            <i class="fas fa-cube mr-2 text-indigo-600"></i>3D ì‹œê°í™”
                        </span>
                        <span id="current-mode-badge" class="badge badge-good">ëª¨ë“œ A</span>
                    </h2>
                    <div id="stair-visualization" class="grid-bg shadow-lg">
                        <!-- ê³„ë‹¨ì´ ì—¬ê¸°ì— ê·¸ë ¤ì§‘ë‹ˆë‹¤ -->
                    </div>
                    
                    <div class="mt-4 p-4 bg-blue-50 rounded-xl border-l-4 border-blue-500">
                        <p class="text-sm text-blue-900 font-semibold mb-1">
                            <i class="fas fa-lightbulb mr-2"></i>ì‹œê°í™” ì•ˆë‚´
                        </p>
                        <p class="text-xs text-blue-700">
                            íŒŒë€ìƒ‰ ê³„ë‹¨ì€ ë°ŸëŠ” ê³„ë‹¨, íšŒìƒ‰ì€ ê±´ë„ˆë›°ëŠ” ê³„ë‹¨ì…ë‹ˆë‹¤.
                        </p>
                    </div>
                </div>
            </div>

            <!-- ì˜¤ë¥¸ìª½: ê²°ê³¼ -->
            <div class="lg:col-span-1">
                <div class="glass rounded-2xl shadow-xl p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                        <i class="fas fa-chart-bar mr-2 text-indigo-600"></i>ë¶„ì„ ê²°ê³¼
                    </h2>
                    
                    <div class="space-y-4">
                        <!-- ì‹œê°„ -->
                        <div id="time-result-card" class="metric-card bg-white rounded-xl p-5 shadow-lg border-l-4">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-green-400 to-emerald-500 flex items-center justify-center mr-3">
                                        <i class="fas fa-clock text-white"></i>
                                    </div>
                                    <span class="text-sm font-semibold text-gray-600">ì†Œìš” ì‹œê°„</span>
                                </div>
                                <span id="time-badge" class="badge badge-good">ìš°ìˆ˜</span>
                            </div>
                            <div class="text-4xl font-black text-gray-800">
                                <span id="time-result">0.00</span><span class="text-2xl text-gray-500">s</span>
                            </div>
                            <div class="mt-2 h-2 bg-gray-200 rounded-full overflow-hidden">
                                <div id="time-progress" class="h-full bg-gradient-to-r from-green-400 to-emerald-500 transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>

                        <!-- ìœ„í—˜ë„ -->
                        <div id="risk-result-card" class="metric-card bg-white rounded-xl p-5 shadow-lg border-l-4">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-red-400 to-rose-500 flex items-center justify-center mr-3">
                                        <i class="fas fa-shield-alt text-white"></i>
                                    </div>
                                    <span class="text-sm font-semibold text-gray-600">ìœ„í—˜ ì§€ìˆ˜</span>
                                </div>
                                <span id="risk-badge" class="badge badge-good">ì•ˆì „</span>
                            </div>
                            <div class="text-4xl font-black text-gray-800">
                                <span id="risk-result">0.00</span>
                            </div>
                            <div class="mt-2 h-2 bg-gray-200 rounded-full overflow-hidden">
                                <div id="risk-progress" class="h-full bg-gradient-to-r from-green-400 to-emerald-500 transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>

                        <!-- ìš´ë™ ì—ë„ˆì§€ -->
                        <div id="kinetic-energy-card" class="metric-card bg-white rounded-xl p-5 shadow-lg border-l-4">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-cyan-500 flex items-center justify-center mr-3">
                                        <i class="fas fa-fire text-white"></i>
                                    </div>
                                    <span class="text-sm font-semibold text-gray-600">ìš´ë™ ì—ë„ˆì§€</span>
                                </div>
                                <i class="fas fa-info-circle text-gray-400"></i>
                            </div>
                            <div class="text-4xl font-black text-gray-800">
                                <span id="kinetic-energy-result">0</span><span class="text-2xl text-gray-500">J</span>
                            </div>
                        </div>

                        <!-- ì´ ì—ë„ˆì§€ -->
                        <div id="total-energy-card" class="metric-card bg-white rounded-xl p-5 shadow-lg border-l-4">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 to-indigo-500 flex items-center justify-center mr-3">
                                        <i class="fas fa-battery-three-quarters text-white"></i>
                                    </div>
                                    <span class="text-sm font-semibold text-gray-600">ì´ ì—ë„ˆì§€</span>
                                </div>
                                <span id="energy-badge" class="badge badge-good">íš¨ìœ¨ì </span>
                            </div>
                            <div class="text-4xl font-black text-gray-800">
                                <span id="total-energy-result">0</span><span class="text-2xl text-gray-500">J</span>
                            </div>
                            <div class="mt-2 h-2 bg-gray-200 rounded-full overflow-hidden">
                                <div id="energy-progress" class="h-full bg-gradient-to-r from-green-400 to-emerald-500 transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- í‘¸í„° -->
        <div class="glass rounded-2xl shadow-xl p-4 mt-6 text-center">
            <p class="text-sm text-gray-600">
                <i class="fas fa-flask mr-2"></i>
                ë¬¼ë¦¬í•™ ê¸°ë°˜ ì‹œë®¬ë ˆì´ì…˜ | ìƒìˆ˜: m=72.4kg, g=9.81m/sÂ², Î¼â‚›=0.6, Vâ‚€=1.2m/s, H_total=5m
            </p>
        </div>
    </div>

    <script>
        (function() {
            // ìƒìˆ˜
            const M = 72.4;
            const G = 9.81;
            const MU_S = 0.6;
            const H_TOTAL = 500;
            const V_0 = 1.2;

            let currentMode = 1;

            // ì…ë ¥ ë™ê¸°í™” í•¨ìˆ˜ë“¤
            window.syncAngleInput = function() {
                const value = document.getElementById('angle-input').value;
                document.getElementById('angle').value = value;
                updateResults();
            }

            window.syncHeightInput = function() {
                const value = document.getElementById('height-input').value;
                document.getElementById('height').value = value;
                updateResults();
            }

            window.syncTreadInput = function() {
                const value = document.getElementById('tread-input').value;
                document.getElementById('tread').value = value;
                updateResults();
            }

            // ìŠ¬ë¼ì´ë”ì™€ ì…ë ¥ í•„ë“œ ë™ê¸°í™”
            document.getElementById('angle').addEventListener('input', function() {
                document.getElementById('angle-input').value = this.value;
            });

            document.getElementById('height').addEventListener('input', function() {
                document.getElementById('height-input').value = this.value;
            });

            document.getElementById('tread').addEventListener('input', function() {
                document.getElementById('tread-input').value = this.value;
            });

            // ìˆ˜ì‹ ì„¹ì…˜ í† ê¸€
            window.toggleFormulas = function() {
                const section = document.getElementById('formula-section');
                section.classList.toggle('active');
            }

            // ê³„ì‚° í•¨ìˆ˜
            function calculateMetrics(angle_deg, height_cm, tread_cm, mode) {
                const H_step_cm = height_cm * mode;
                const D_step_cm = tread_cm * mode;
                const N_steps = H_TOTAL / H_step_cm;
                
                if (N_steps <= 0 || !isFinite(N_steps)) {
                    return { T_approx: NaN, Risk_Index: NaN, N_steps: 0, H_step_cm: 0, D_step_cm: 0, E_kinetic: NaN, E_total: NaN };
                }

                const H_TOTAL_M = H_TOTAL / 100.0;
                const D_horizontal_total = N_steps * D_step_cm / 100.0;
                const T_approx = (D_horizontal_total / V_0) + (N_steps * 0.2);
                const V_avg = H_TOTAL_M / T_approx;
                const E_1 = M * G * H_TOTAL_M;
                const E_2_sim = 0.5 * M * Math.pow(V_avg, 2) * N_steps * 0.1;
                const E_total = E_1 + E_2_sim;
                const theta_rad = angle_deg * (Math.PI / 180);
                const risk_index = MU_S * Math.tan(theta_rad);
                
                return {
                    T_approx: T_approx,
                    Risk_Index: risk_index,
                    N_steps: N_steps,
                    H_step_cm: H_step_cm,
                    D_step_cm: D_step_cm,
                    E_kinetic: E_2_sim,
                    E_total: E_total,
                };
            }

            // ê°œì„ ëœ ì‹œê°í™” í•¨ìˆ˜ - í™”ë©´ ëê¹Œì§€ ì±„ìš°ê¸°
            function updateStairVisualization(h_step, d_step, mode) {
                const visContainer = document.getElementById('stair-visualization');
                visContainer.innerHTML = '';
                
                const actualHeight = h_step / mode;
                const actualTread = d_step / mode;
                
                // ì»¨í…Œì´ë„ˆ í¬ê¸°
                const containerWidth = visContainer.clientWidth;
                const containerHeight = visContainer.clientHeight;
                
                // ì—¬ë°± ì„¤ì •
                const margin = 20;
                const usableWidth = containerWidth - margin * 2;
                const usableHeight = containerHeight - margin * 2;
                
                // ê·¸ë¦´ ê³„ë‹¨ ìˆ˜ ê³„ì‚° (í™”ë©´ì— ë§ê²Œ)
                let stepsToDrawH = Math.floor(usableHeight / (actualHeight * 2)) + 2;
                let stepsToDrawW = Math.floor(usableWidth / (actualTread * 2)) + 2;
                const STEPS_TO_DRAW = Math.min(stepsToDrawH, stepsToDrawW, 12);
                
                // ì „ì²´ ê³„ë‹¨ì˜ ì‹¤ì œ í¬ê¸° ê³„ì‚°
                const totalActualHeight = actualHeight * STEPS_TO_DRAW;
                const totalActualWidth = actualTread * STEPS_TO_DRAW;
                
                // ìŠ¤ì¼€ì¼ íŒ©í„°: ì»¨í…Œì´ë„ˆì— ë§ì¶° ìµœëŒ€í•œ í¬ê²Œ
                const scaleH = usableHeight / totalActualHeight;
                const scaleW = usableWidth / totalActualWidth;
                const scale = Math.min(scaleH, scaleW) * 0.9; // 90%ë¡œ ì—¬ìœ  ê³µê°„ í™•ë³´
                
                const vis_h = actualHeight * scale;
                const vis_d = actualTread * scale;

                let total_height = margin;
                let total_width = margin;
                
                for (let i = 0; i < STEPS_TO_DRAW; i++) {
                    const step = document.createElement('div');
                    step.className = 'stair-step';
                    
                    step.style.width = `${vis_d}px`;
                    step.style.height = `${vis_h}px`;
                    step.style.bottom = `${total_height}px`;
                    step.style.left = `${total_width}px`;
                    
                    total_height += vis_h;
                    total_width += vis_d;
                    
                    if (mode === 2 && i % 2 === 0) {
                        step.style.background = 'linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%)';
                        step.style.border = '2px solid #2563eb';
                    } else if (mode === 2) {
                        step.style.background = 'linear-gradient(135deg, #9ca3af 0%, #6b7280 100%)';
                        step.style.border = '1px solid #4b5563';
                        step.style.opacity = '0.5';
                    } else {
                        step.style.background = 'linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%)';
                        step.style.border = '2px solid #2563eb';
                    }
                    
                    visContainer.appendChild(step);
                }
            }

            // ê²°ê³¼ ì—…ë°ì´íŠ¸
            function updateResults() {
                const angle = parseFloat(document.getElementById('angle').value);
                const height = parseFloat(document.getElementById('height').value);
                const tread = parseFloat(document.getElementById('tread').value);
                
                const metrics = calculateMetrics(angle, height, tread, currentMode);
                
                if (isNaN(metrics.T_approx)) {
                    document.getElementById('time-result').textContent = 'ì˜¤ë¥˜';
                    document.getElementById('risk-result').textContent = 'ì˜¤ë¥˜';
                    document.getElementById('kinetic-energy-result').textContent = 'ì˜¤ë¥˜';
                    document.getElementById('total-energy-result').textContent = 'ì˜¤ë¥˜';
                    return;
                }

                // ê°’ ì—…ë°ì´íŠ¸
                document.getElementById('time-result').textContent = metrics.T_approx.toFixed(2);
                document.getElementById('risk-result').textContent = metrics.Risk_Index.toFixed(4);
                document.getElementById('kinetic-energy-result').textContent = metrics.E_kinetic.toFixed(0);
                document.getElementById('total-energy-result').textContent = metrics.E_total.toFixed(0);
                
                // ìƒì„¸ ì •ë³´
                document.getElementById('v-step-result').textContent = `${metrics.H_step_cm}cm`;
                document.getElementById('h-step-result').textContent = `${metrics.D_step_cm}cm`;
                document.getElementById('steps-result').textContent = metrics.N_steps.toFixed(1);

                // ì ìˆ˜ ê³„ì‚°
                const efficiencyScore = Math.max(0, Math.min(100, 100 - (metrics.T_approx - 5) * 5)).toFixed(0);
                const safetyScore = Math.max(0, Math.min(100, 100 - (metrics.Risk_Index * 100))).toFixed(0);
                document.getElementById('efficiency-score').textContent = efficiencyScore;
                document.getElementById('safety-score').textContent = safetyScore;

                // ì‹œê°„ ì¹´ë“œ ìŠ¤íƒ€ì¼ë§
                const timeCard = document.getElementById('time-result-card');
                const timeBadge = document.getElementById('time-badge');
                const timeProgress = document.getElementById('time-progress');
                
                if (metrics.T_approx < 7.0) {
                    timeCard.style.borderColor = '#10b981';
                    timeBadge.className = 'badge badge-good';
                    timeBadge.textContent = 'ìš°ìˆ˜';
                    timeProgress.style.width = '90%';
                    timeProgress.style.background = 'linear-gradient(90deg, #10b981, #059669)';
                } else if (metrics.T_approx > 15.0) {
                    timeCard.style.borderColor = '#ef4444';
                    timeBadge.className = 'badge badge-danger';
                    timeBadge.textContent = 'ëŠë¦¼';
                    timeProgress.style.width = '30%';
                    timeProgress.style.background = 'linear-gradient(90deg, #ef4444, #dc2626)';
                } else {
                    timeCard.style.borderColor = '#f59e0b';
                    timeBadge.className = 'badge badge-warning';
                    timeBadge.textContent = 'ë³´í†µ';
                    timeProgress.style.width = '60%';
                    timeProgress.style.background = 'linear-gradient(90deg, #f59e0b, #d97706)';
                }

                // ìœ„í—˜ë„ ì¹´ë“œ ìŠ¤íƒ€ì¼ë§
                const riskCard = document.getElementById('risk-result-card');
                const riskBadge = document.getElementById('risk-badge');
                const riskProgress = document.getElementById('risk-progress');
                
                if (metrics.Risk_Index < 0.5) {
                    riskCard.style.borderColor = '#10b981';
                    riskBadge.className = 'badge badge-good';
                    riskBadge.textContent = 'ì•ˆì „';
                    riskProgress.style.width = '20%';
                    riskProgress.style.background = 'linear-gradient(90deg, #10b981, #059669)';
                } else if (metrics.Risk_Index > 0.9) {
                    riskCard.style.borderColor = '#ef4444';
                    riskBadge.className = 'badge badge-danger';
                    riskBadge.textContent = 'ìœ„í—˜';
                    riskProgress.style.width = '90%';
                    riskProgress.style.background = 'linear-gradient(90deg, #ef4444, #dc2626)';
                } else {
                    riskCard.style.borderColor = '#f59e0b';
                    riskBadge.className = 'badge badge-warning';
                    riskBadge.textContent = 'ì£¼ì˜';
                    riskProgress.style.width = '50%';
                    riskProgress.style.background = 'linear-gradient(90deg, #f59e0b, #d97706)';
                }

                // ì—ë„ˆì§€ ì¹´ë“œ ìŠ¤íƒ€ì¼ë§
                const kineticCard = document.getElementById('kinetic-energy-card');
                kineticCard.style.borderColor = '#3b82f6';

                const totalCard = document.getElementById('total-energy-card');
                const energyBadge = document.getElementById('energy-badge');
                const energyProgress = document.getElementById('energy-progress');
                
                if (metrics.E_total < 8000) {
                    totalCard.style.borderColor = '#10b981';
                    energyBadge.className = 'badge badge-good';
                    energyBadge.textContent = 'íš¨ìœ¨ì ';
                    energyProgress.style.width = '30%';
                    energyProgress.style.background = 'linear-gradient(90deg, #10b981, #059669)';
                } else if (metrics.E_total > 10000) {
                    totalCard.style.borderColor = '#ef4444';
                    energyBadge.className = 'badge badge-danger';
                    energyBadge.textContent = 'ë¹„íš¨ìœ¨';
                    energyProgress.style.width = '90%';
                    energyProgress.style.background = 'linear-gradient(90deg, #ef4444, #dc2626)';
                } else {
                    totalCard.style.borderColor = '#f59e0b';
                    energyBadge.className = 'badge badge-warning';
                    energyBadge.textContent = 'ë³´í†µ';
                    energyProgress.style.width = '60%';
                    energyProgress.style.background = 'linear-gradient(90deg, #f59e0b, #d97706)';
                }

                updateStairVisualization(metrics.H_step_cm, metrics.D_step_cm, currentMode);
            }

            // ëª¨ë“œ ë³€ê²½
            window.setMode = function(mode) {
                currentMode = mode;
                const btn1 = document.getElementById('mode-1-btn');
                const btn2 = document.getElementById('mode-2-btn');
                const badge = document.getElementById('current-mode-badge');
                
                if (mode === 1) {
                    btn1.className = 'mode-btn py-4 px-6 rounded-xl font-bold text-lg transition-all duration-300 relative z-10 bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg';
                    btn2.className = 'mode-btn py-4 px-6 rounded-xl font-bold text-lg transition-all duration-300 relative z-10 bg-gray-200 text-gray-700';
                    badge.textContent = 'ëª¨ë“œ A';
                    badge.className = 'badge badge-good';
                } else {
                    btn2.className = 'mode-btn py-4 px-6 rounded-xl font-bold text-lg transition-all duration-300 relative z-10 bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg';
                    btn1.className = 'mode-btn py-4 px-6 rounded-xl font-bold text-lg transition-all duration-300 relative z-10 bg-gray-200 text-gray-700';
                    badge.textContent = 'ëª¨ë“œ B';
                    badge.className = 'badge badge-warning';
                }
                updateResults();
            }

            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.querySelectorAll('input[type="range"]').forEach(input => {
                input.addEventListener('input', updateResults);
            });

            // ìœˆë„ìš° ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ì‹œê°í™” ì—…ë°ì´íŠ¸
            window.addEventListener('resize', updateResults);

            // ì´ˆê¸°í™”
            document.addEventListener('DOMContentLoaded', () => {
                setMode(1);
                updateResults();
            });
        })();
    </script>
</body>
</html>
